## 1 白盒测试的概念

白盒测试又称透明盒测试，软件测试的主要方法之一。测试应用程序的内容结构或运作，而不是测试应用程序的功能（即黑盒测试）。在白盒测试中，以编程语言的角度来设计测试案例。测试者输入数据验证数据流在程序中的流动路径，并确定适当的输出，类似测试电路中的节点。测试者了解待测程序的内部结构、算法等信息，这是从程序设计者的角度对程序进行的测试

白盒测试设计技术包括以下代码覆盖标准：

- 控制流测试
- 数据流测试
- 分支测试
- 语句覆盖
- 判定覆盖
- 修改条件、判定覆盖
- 主要路径测试
- 路径测试

综上所述：传统的白盒测试主要指全面了解程序内部逻辑结构，对所有逻辑路径进行测试，方法上主要单元测试。但这一做法成本极高，需要超过1：1的测试开发比

在白盒测试的思想基础上，可以调整白盒测试的方式从代码技术导向变为用户需求导向，即在了解代码实现逻辑的基础上，从用户需求的角度充分设计测试用例。当然一些底层函数，比如字符串查找的呢，还是只能从代码触发去做传统的白盒测试覆盖，不过这部分比例我们尽可能降低

理解了白盒测试的理论后，我们就明白为什么要做白盒测试？

1. 提升工程效率
虽然白盒测试前期的成本很高，但是在完成基础建设后效率提升是非常显著的

2. 加强质量覆盖 
对于一些逻辑复杂的模块，单纯的黑河测试很难覆盖到各种场景。

哪些项目适合白盒测试

1. 逻辑复杂且UI少
首先如果逻辑很简单，单测也就没有太大的必要了；其次如果很多UI强相关，比如各种Android App的UI展示模块，这块涉及到更多的是UI展现、兼容性测试等等，单测无法很好的覆盖

2. 长期维护
单测的前期投入成本巨大，且收益很少，不是长期维护的项目很难收回成本

什么时候做白盒测试？

众所周知软件开发模型中，问题发现的越晚成本越高。所以这里也是建议尽早开展，我们目前的项目流程中，要求在开发提测前就完成70%的单元、接口测试用例，以保证功能主路径没问题


## 1 白盒测试 - 基础

#### 1.1 什么是白盒测试

#### 1.2 什么是白盒测试


## 2 白盒测试体系 - 框架搭建

#### 2.1 什么是测试框架

测试框架是测试开发过程中提取特定领域测试方法共性部分形成的体系结构，并不是一个现成可用的系统，需要测试工程师在它基础上结合自己的测试对象转换成为自己的测试用例

测试框架四要素：

1. 测试目标
一般是一个函数，一个对象或者一组相关对象集。测试人员在测试前需要对测试目标有充分的了解，明确测试的预期结果

2. 测试集
这一组测试用例服务于相同的测试目标，保证测试的有序维护

3. 测试执行
测试集按序执行

4. 断言
验证被测程序在测试中的行为或状态是否符合预期

#### 2.2 为什么要用测试框架

在测试框架基础上重用测试设计原则和测试经验，调整部分内容便可满足需求，可提高测试用例设计开发质量，降低成本，缩短时间

#### 2.3 哪些测试项目适合搭建测试框架

- 逻辑复杂且封装性好
首先如果代码逻辑很简单，单测也就没有太大的必要了；其次如果代码没有进行加基本的封装或者封装过度，层次结构不清晰，那在测试过程中也是举步维艰了

- 复用性高
被测模块的复用性高，搭建的测试框架才是有价值有收益的，毕竟投入成本很高；其次在测试中还可以抽象出可重复使用的公共方法，测试代码的复用性也高

#### 2.4 如果搭建测试框架

测试框架种类繁多，我们选择时满足以下特点即可：

- 开源
- 功能强大
- 扩展性好

常用的测试框架：

- Java - Junit / TestNG
- .net - NUit
- C++ - CPPUnit / GTest
- Python - PyUnit / py.test / Nose
- OC - OCUnit / OCMock

一般测试用例执行过程分为四个步骤：

**SetUp：准备阶段**

每个测试用例执行前的准备阶段，部署测试环境比如对象的初始化等

**Run：测试执行**

执行测试用例

**Verify：测试验证**

验证测试用例的结果是否符合预期

**TearDown：清理环境**

清理该条测试用例执行中产生的环境，比如申请空间的释放，还愿测试环境，保证对其他的测试用例无连带影响

框架运行机制：


  

#### 2.5 什么时候搭建测试框架

自然在软件开发框架或模块接口确定后，测试人员便可以着手搭建测试框架，尽早的投入白盒测试，所以这里建议尽早开始，当然在项目的任何阶段我们都可以介入白盒测试，开始搭建测试框架在不同时期满足相应原则即可：

**项目初期**

满足功能测试的需求，可以快速地发现问题

**项目中期**
健壮，稳定执行，代码覆盖率逼近70%

**项目后期**
高效执行，方便进行持续集成和敏捷开发

